<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="kr.co.mediazen.tts.mapper.NoticeMapper">

	<!-- 게시글 목록 조회 -->
	<select id="getNoticeList" resultType="kr.co.mediazen.tts.dto.response.NoticeListResponseDto">
        SELECT n.id, n.user_id, n.title, n.notice_type, n.created_at::TIMESTAMP AS created_at, u.username
        FROM notice AS n
        JOIN users AS u ON n.user_id = u.id
        ORDER BY created_at DESC
        LIMIT #{pageSize} OFFSET #{offset}
    </select>

	<!-- 총 게시글 개수 조회 -->    
    <select id="getNoticeCount" resultType="int">
    	SELECT count(*)
    	FROM notice
    </select>

</mapper>